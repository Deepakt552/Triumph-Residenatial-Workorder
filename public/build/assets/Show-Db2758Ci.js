import{r as l,a as G,G as T,j as e,S as Q,x as q,V as r}from"./app-C7HmzJUd.js";import{A as ee}from"./AdminLayout-BDU_HIAd.js";import{D as C,M as f,S as j}from"./SecondaryButton-XS0gnoGE.js";import{T as se}from"./TextInput-CsgndSGw.js";import{I as h}from"./InputLabel-Bw2gduTy.js";import{T as y}from"./TextArea-e4wNS-y9.js";import{P as S}from"./PrimaryButton-D6cUMsYk.js";import"./ApplicationLogo-BmzfqIeR.js";import"./ResponsiveNavLink-C3H-ixPB.js";import"./transition-CDNGgBsE.js";function ue({request:s,auth:c}){var F;const[m,v]=l.useState(!1),[B,w]=l.useState(!1),[ae,re]=l.useState(!1),[O,b]=l.useState(!1),[z,R]=l.useState(!1),[V,N]=l.useState(!1),[p,$]=l.useState(!1),[D,I]=l.useState(!1),[E,_]=l.useState([]),[H,P]=l.useState(!1),L=l.useRef(null);l.useEffect(()=>{$(!0),P(!0),G.get(route("admin.properties.get")).then(t=>{Array.isArray(t.data)?_(t.data):(console.warn("Unexpected response format for properties:",t.data),_([])),P(!1)}).catch(t=>{console.error("Error fetching properties:",t),P(!1),_([])})},[]),l.useEffect(()=>{function t(o){L.current&&!L.current.contains(o.target)&&I(!1)}return D&&document.addEventListener("mousedown",t),()=>{document.removeEventListener("mousedown",t)}},[D]);const{data:n,setData:x,post:ne,processing:g,reset:M,errors:k}=T({message:"",notes:"",email:s.tenant_email,property_id:s.property_id||""}),A=T({}),Y=c.user&&c.user.role==="super_admin",J=t=>{t.preventDefault(),console.log("Approve button clicked");const o=n.message||"",i=n.notes||"";console.log("Approval data:",{message:o,notes:i});const a=r.loading("Sending approval email to "+s.tenant_email+"..."),u=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(route("admin.maintenance-requests.approve",s.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":u,Accept:"application/json"},body:JSON.stringify({message:o,notes:i})}).then(d=>(console.log("Approval response status:",d.status),d.ok?d.json():d.json().then(X=>{throw new Error(X.message||"Server error occurred")}))).then(d=>{console.log("Approval success response:",d),r.dismiss(a),r.success(d.message||"Maintenance request approved and email sent successfully!",{duration:5e3,style:{background:"#10B981",color:"white",padding:"16px",borderRadius:"8px"},iconTheme:{primary:"white",secondary:"#10B981"}}),v(!1),M(),setTimeout(()=>{window.location.reload()},3e3)}).catch(d=>{console.log("Approval error:",d),r.dismiss(a),r.error(d.message||"Failed to send approval email. Please try again.",{duration:5e3,style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}})})},W=t=>{if(t.preventDefault(),console.log("Reject button clicked"),!n.message||n.message.trim()===""){r.error("Please provide a reason for rejection.",{style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}});return}console.log("Reject validation passed with message:",n.message);const o=r.loading("Sending rejection email to "+s.tenant_email+"..."),i=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(route("admin.maintenance-requests.reject",s.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json"},body:JSON.stringify({message:n.message,notes:n.notes||""})}).then(a=>(console.log("Rejection response status:",a.status),a.ok?a.json():a.json().then(u=>{throw new Error(u.message||"Server error occurred")}))).then(a=>{console.log("Rejection success response:",a),r.dismiss(o),r.success(a.message||"Maintenance request rejected and email sent successfully!",{duration:5e3,style:{background:"#10B981",color:"white",padding:"16px",borderRadius:"8px"},iconTheme:{primary:"white",secondary:"#10B981"}}),w(!1),M(),setTimeout(()=>{window.location.reload()},3e3)}).catch(a=>{console.log("Rejection error:",a),r.dismiss(o),r.error(a.message||"Failed to send rejection email. Please try again.",{duration:5e3,style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}})})},Z=t=>{if(t.preventDefault(),console.log("Resend PDF button clicked"),!n.email||n.email.trim()===""){r.error("Please provide an email address.",{style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}});return}console.log("Resend PDF validation passed with email:",n.email);const o=r.loading("Sending maintenance request PDF to "+n.email+"..."),i=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(route("admin.maintenance-requests.resend-pdf",s.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":i,Accept:"application/json"},body:JSON.stringify({email:n.email,message:n.message||""})}).then(a=>a.ok?a.json():a.json().then(u=>{throw new Error(u.message||"Server error occurred")})).then(a=>{console.log("Resend PDF success response:",a),r.dismiss(o),r.success(a.message||"Maintenance request PDF sent successfully!",{duration:5e3,style:{background:"#10B981",color:"white",padding:"16px",borderRadius:"8px"},iconTheme:{primary:"white",secondary:"#10B981"}}),b(!1),M()}).catch(a=>{console.log("Resend PDF error:",a),r.dismiss(o),r.error(a.message||"Failed to send PDF. Please try again.",{duration:5e3,style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}})})},U=t=>{t.preventDefault();const o=r.loading("Deleting maintenance request...");A.delete(route("admin.maintenance-requests.destroy",s.id),{onSuccess:()=>{r.dismiss(o),r.success("Maintenance request deleted successfully!",{duration:5e3,style:{background:"#10B981",color:"white",padding:"16px",borderRadius:"8px"}}),window.location.href=route("admin.maintenance-requests")},onError:i=>{r.dismiss(o),r.error(i.message||"Failed to delete maintenance request. Please try again.",{duration:5e3,style:{background:"#EF4444",color:"white",padding:"16px",borderRadius:"8px"}})}})},K=t=>{t.preventDefault();const o=document.querySelector('meta[name="csrf-token"]').getAttribute("content");fetch(route("admin.maintenance-requests.update-property",s.id),{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":o,Accept:"application/json"},body:JSON.stringify({property_id:n.property_id})}).then(i=>i.ok?i.json():i.json().then(a=>{throw new Error(a.message||"Server error occurred")})).then(i=>{r.success("Property assigned successfully!"),N(!1),setTimeout(()=>{window.location.reload()},1e3)}).catch(i=>{r.error(i.message||"Failed to assign property. Please try again.")})};return e.jsxs(ee,{header:"Maintenance Request Details",children:[e.jsx(Q,{title:"Maintenance Request Details"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-6 opacity-0 transition-all duration-500",style:{opacity:p?1:0,transform:p?"translateY(0)":"translateY(10px)"},children:e.jsxs(q,{href:route("admin.maintenance-requests"),className:"inline-flex items-center rounded-md bg-white px-3 py-2 text-sm font-medium text-primary-600 shadow-sm hover:bg-gray-50 hover:text-primary-500 transition-colors duration-150 border border-gray-200",children:[e.jsx("svg",{className:"mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Back to Maintenance Requests"]})}),e.jsx("div",{className:"mb-6 overflow-hidden rounded-lg bg-white shadow-sm border border-gray-100 opacity-0 transition-all duration-500",style:{opacity:p?1:0,transform:p?"translateY(0)":"translateY(20px)",transitionDelay:"100ms"},children:e.jsx("div",{className:"px-6 py-6 mb-20",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"text-xl font-medium text-gray-900",children:["Tenant: ",s.tenant_name]}),e.jsx(te,{status:s.status}),s.selected_language&&e.jsx("span",{className:"ml-3 inline-flex items-center rounded-full bg-blue-100 px-2.5 py-0.5 text-xs font-medium text-blue-800 border border-blue-200",children:s.selected_language==="es"?"Spanish Form":"English Form"})]}),e.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Submitted on ",new Date(s.created_at).toLocaleDateString()]}),s.is_emergency&&e.jsxs("div",{className:"mt-2 inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800 border border-red-200",children:[e.jsx("svg",{className:"mr-1 h-4 w-4 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Emergency Request"]}),s.status==="rejected"&&s.rejection_reason&&e.jsxs("div",{className:"mt-3 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:"Rejection Reason:"}),e.jsx("p",{className:"mt-1 text-sm text-red-700",children:s.rejection_reason})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 md:mt-0",children:[e.jsxs("button",{onClick:()=>window.open(`${route("maintenance.form-pdf")}?id=${s.id}&lang=${s.selected_language||"en"}`,"_blank"),className:"inline-flex items-center px-4 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-primary-600 to-primary-700 hover:from-primary-700 hover:to-primary-800 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-sm transition-all duration-200",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"View PDF"]}),e.jsxs("button",{type:"button",onClick:()=>b(!0),className:"inline-flex items-center px-4 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-primary-500 to-primary-600 hover:from-primary-600 hover:to-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 shadow-sm transition-all duration-200",children:[e.jsxs("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[e.jsx("path",{d:"M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"}),e.jsx("path",{d:"M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"})]}),"Resend PDF"]}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(S,{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 shadow-sm transition-all duration-200",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Approve"]}),e.jsxs(C,{onClick:()=>w(!0),className:"inline-flex items-center px-4 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-accent-500 to-accent-600 hover:from-accent-600 hover:to-accent-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-accent-500 shadow-sm transition-all duration-200",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Reject"]})]}),Y&&e.jsxs(C,{onClick:()=>R(!0),className:"inline-flex items-center px-4 py-3 text-sm font-medium rounded-md text-white bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 shadow-sm transition-all duration-200",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]})})}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm border border-gray-100 opacity-0 transition-all duration-500",style:{opacity:p?1:0,transform:p?"translateY(0)":"translateY(20px)",transitionDelay:"200ms"},children:e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-4",children:[e.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:"Request Information"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Details about the maintenance request and tenant information"})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{className:"col-span-1 rounded-lg bg-primary-50 p-5 hover:shadow transition-shadow duration-300",children:[e.jsx("h4",{className:"text-sm font-medium uppercase tracking-wide text-primary-800",children:"Tenant Information"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Name"}),e.jsx("div",{className:"mt-1 text-sm font-medium text-gray-900",children:s.tenant_name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Email"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.tenant_email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Phone"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.tenant_phone})]})]})]}),e.jsxs("div",{className:"col-span-1 rounded-lg bg-primary-50 p-5 hover:shadow transition-shadow duration-300",children:[e.jsx("h4",{className:"text-sm font-medium uppercase tracking-wide text-primary-800",children:"Property Information"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{className:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Building"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:s.building_name})]}),e.jsxs("div",{className:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Property"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:[s.property&&s.property.name?s.property.name:((F=E.find(t=>String(t.id)===String(s.property_id)))==null?void 0:F.name)||"Not assigned",e.jsxs("button",{type:"button",onClick:()=>N(!0),className:"ml-2 text-primary-600 hover:text-primary-900",children:[s.property?"Change":"Assign"," Property"]})]})]}),e.jsxs("div",{className:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Unit"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:s.unit_number})]}),e.jsxs("div",{className:"py-4 sm:grid sm:grid-cols-3 sm:gap-4 sm:py-5",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Address"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:col-span-2 sm:mt-0",children:[e.jsx("div",{children:s.property_address}),e.jsxs("div",{children:[s.city,", ",s.state," ",s.zip_code]})]})]})]})]}),e.jsxs("div",{className:"col-span-1 rounded-lg bg-primary-50 p-5 hover:shadow transition-shadow duration-300",children:[e.jsx("h4",{className:"text-sm font-medium uppercase tracking-wide text-primary-800",children:"Schedule Information"}),e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Preferred Date"}),e.jsx("div",{className:"mt-1 text-sm font-medium text-gray-900",children:s.scheduled_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Preferred Time"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.scheduled_time})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Permission to Enter"}),e.jsx("div",{className:"mt-1 text-sm text-gray-900",children:s.permission_to_enter?"Yes":"No"}),!s.permission_to_enter&&s.no_permission_reason&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:["Reason: ",s.no_permission_reason]})]})]})]})]}),e.jsxs("div",{className:"mt-6 rounded-lg bg-gray-50 p-5 hover:shadow transition-shadow duration-300",children:[e.jsx("h4",{className:"text-sm font-medium uppercase tracking-wide text-gray-700",children:"Work Request Details"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Work Requested"}),e.jsx("div",{className:"mt-2 whitespace-pre-wrap rounded-md bg-white p-4 text-sm text-gray-900 border border-gray-200",children:s.work_requested})]}),s.special_instructions&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500",children:"Special Instructions"}),e.jsx("div",{className:"mt-2 whitespace-pre-wrap rounded-md bg-white p-4 text-sm text-gray-900 border border-gray-200",children:s.special_instructions})]})]}),s.property_images&&e.jsxs("div",{className:"mt-6 rounded-lg bg-gray-50 p-5 hover:shadow transition-shadow duration-300",children:[e.jsx("h4",{className:"text-sm font-medium uppercase tracking-wide text-gray-700",children:"Property Images"}),e.jsx("div",{className:"mt-3 grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:Array.isArray(s.property_images)?s.property_images.map((t,o)=>e.jsx("div",{className:"relative",children:e.jsxs("a",{href:`/storage/${t.replace(/^\/storage\//,"")}`,target:"_blank",rel:"noopener noreferrer",className:"block",children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-200",children:e.jsx("img",{src:`/storage/${t.replace(/^\/storage\//,"")}`,alt:`Property image ${o+1}`,className:"h-full w-full object-cover object-center",onError:i=>{i.target.onerror=null,console.error("Failed to load image:",t),i.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f3f4f6'/%3E%3Cpath d='M30,40 L70,40 L70,70 L30,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3Cpath d='M40,50 C42.5,50 44.5,47.5 44.5,45 C44.5,42.5 42.5,40 40,40 C37.5,40 35,42.5 35,45 C35,47.5 37.5,50 40,50 Z' fill='%23d1d5db'/%3E%3Cpath d='M30,70 L50,50 L60,60 L70,50 L70,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3C/svg%3E"}})}),e.jsx("p",{className:"mt-1 text-xs text-center text-gray-500",children:"Click to view"})]})},o)):typeof s.property_images=="string"&&s.property_images.length>0?(()=>{try{const t=JSON.parse(s.property_images);return Array.isArray(t)?t.map((o,i)=>e.jsx("div",{className:"relative",children:e.jsxs("a",{href:`/storage/${o.replace(/^\/storage\//,"")}`,target:"_blank",rel:"noopener noreferrer",className:"block",children:[e.jsx("div",{className:"aspect-w-1 aspect-h-1 w-full overflow-hidden rounded-lg bg-gray-200",children:e.jsx("img",{src:`/storage/${o.replace(/^\/storage\//,"")}`,alt:`Property image ${i+1}`,className:"h-full w-full object-cover object-center",onError:a=>{a.target.onerror=null,console.error("Failed to load image:",o),a.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f3f4f6'/%3E%3Cpath d='M30,40 L70,40 L70,70 L30,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3Cpath d='M40,50 C42.5,50 44.5,47.5 44.5,45 C44.5,42.5 42.5,40 40,40 C37.5,40 35,42.5 35,45 C35,47.5 37.5,50 40,50 Z' fill='%23d1d5db'/%3E%3Cpath d='M30,70 L50,50 L60,60 L70,50 L70,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3C/svg%3E"}})}),e.jsx("p",{className:"mt-1 text-xs text-center text-gray-500",children:"Click to view"})]})},i)):e.jsx("div",{className:"col-span-full flex justify-center items-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-gray-500",children:"No images available"})]})})}catch(t){return console.error("Error parsing property_images JSON:",t),e.jsx("div",{className:"col-span-full flex justify-center items-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Error loading images"})]})})}})():e.jsx("div",{className:"col-span-full flex justify-center items-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("p",{className:"mt-2 text-gray-500",children:"No images available"})]})})})]})]})})]})}),e.jsx(f,{show:m,onClose:()=>v(!1),children:e.jsxs("form",{onSubmit:J,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Approve Maintenance Request"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Send an approval notification to the tenant for this maintenance request."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"message",value:"Message (Optional)"}),e.jsx(y,{id:"message",value:n.message,onChange:t=>x("message",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Add an optional message to include in the approval email.",rows:4})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"notes",value:"Admin Notes (Not Visible to Tenant)"}),e.jsx(y,{id:"notes",value:n.notes,onChange:t=>x("notes",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Add optional internal notes about this approval.",rows:3})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>v(!1),className:"mr-3",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:g,children:"Approve Request"})]})]})}),e.jsx(f,{show:B,onClose:()=>w(!1),children:e.jsxs("form",{onSubmit:W,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Reject Maintenance Request"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Send a rejection notification to the tenant for this maintenance request."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"message",value:"Reason for Rejection (Required)"}),e.jsx(y,{id:"message",value:n.message,onChange:t=>x("message",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Provide a reason for rejecting this maintenance request.",required:!0,rows:4}),k.message&&e.jsx("div",{className:"text-sm text-accent-600 mt-1",children:k.message})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"notes",value:"Admin Notes (Not Visible to Tenant)"}),e.jsx(y,{id:"notes",value:n.notes,onChange:t=>x("notes",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Add optional internal notes about this rejection.",rows:3})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>w(!1),className:"mr-3",children:"Cancel"}),e.jsx(C,{type:"submit",disabled:g,children:"Reject Request"})]})]})}),e.jsx(f,{show:O,onClose:()=>b(!1),children:e.jsxs("form",{onSubmit:Z,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Resend Maintenance Request PDF"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Send the maintenance request PDF to a specified email address."}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"email",value:"Email Address"}),e.jsx(se,{id:"email",type:"email",value:n.email,onChange:t=>x("email",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Enter email address",required:!0}),k.email&&e.jsx("div",{className:"text-sm text-accent-600 mt-1",children:k.email})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx(h,{htmlFor:"message",value:"Message (Optional)"}),e.jsx(y,{id:"message",value:n.message,onChange:t=>x("message",t.target.value),className:"mt-1 block w-full focus:border-primary-500 focus:ring-primary-500",placeholder:"Add an optional message to include in the email.",rows:4})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>b(!1),className:"mr-3",children:"Cancel"}),e.jsx(S,{type:"submit",disabled:g,children:"Send PDF"})]})]})}),e.jsx(f,{show:z,onClose:()=>R(!1),children:e.jsxs("form",{onSubmit:U,className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Delete Maintenance Request"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Are you sure you want to delete this maintenance request? This action cannot be undone."}),e.jsxs("div",{className:"mt-4 rounded-md bg-gray-50 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Request Details:"}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-600",children:[e.jsxs("li",{children:["Tenant: ",s.tenant_name]}),e.jsxs("li",{children:["Building: ",s.building_name]}),e.jsxs("li",{children:["Unit: ",s.unit_number]}),e.jsxs("li",{children:["Date: ",new Date(s.created_at).toLocaleDateString()]}),e.jsxs("li",{children:["Status: ",s.status.charAt(0).toUpperCase()+s.status.slice(1)]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(j,{onClick:()=>R(!1),className:"mr-3",children:"Cancel"}),e.jsx(C,{type:"submit",disabled:A.processing,children:A.processing?"Deleting...":"Delete Request"})]})]})}),e.jsx(f,{show:V,onClose:()=>N(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:s.property?"Change Property":"Assign Property"}),e.jsxs("form",{onSubmit:K,className:"mt-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"property_id",className:"block text-sm font-medium text-gray-700",children:"Select Property"}),e.jsxs("select",{id:"property_id",name:"property_id",value:n.property_id,onChange:t=>x("property_id",t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",disabled:H,required:!0,children:[e.jsx("option",{value:"",children:"Select a property"}),E.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-4",children:[e.jsx(j,{type:"button",onClick:()=>N(!1),children:"Cancel"}),e.jsx(S,{type:"submit",disabled:g||!n.property_id,children:g?"Saving...":"Save"})]})]})]})})]})}function te({status:s}){let c="",m="";switch(s){case"pending":c="bg-accent-100",m="text-accent-800";break;case"approved":c="bg-green-100",m="text-green-800";break;case"rejected":c="bg-red-100",m="text-red-800";break;default:c="bg-gray-100",m="text-gray-800"}return e.jsxs("span",{className:`ml-3 inline-flex items-center rounded-full px-3 py-0.5 text-sm font-medium ${c} ${m}`,children:[s==="pending"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-accent-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),s==="approved"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-green-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),s==="rejected"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-red-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),s.charAt(0).toUpperCase()+s.slice(1)]})}export{ue as default};
