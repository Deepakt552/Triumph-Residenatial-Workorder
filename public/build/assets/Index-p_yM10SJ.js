import{r,G as ae,a as A,V as L,j as e,S as ne,x as E,A as H}from"./app-C7HmzJUd.js";import{A as ie}from"./AdminLayout-BDU_HIAd.js";import{P as le}from"./Pagination-BcGU2XBB.js";import{M as oe,S as de,D as ce}from"./SecondaryButton-XS0gnoGE.js";import"./ApplicationLogo-BmzfqIeR.js";import"./ResponsiveNavLink-C3H-ixPB.js";import"./transition-CDNGgBsE.js";function be({requests:i,filters:d,auth:n,buildings:j,stats:v}){var Y;const a=d||{};r.useEffect(()=>{console.log("Filters received from backend:",a)},[a]);const[m,S]=r.useState(a.search||""),[x,F]=r.useState(a.start_date||""),[h,R]=r.useState(a.end_date||""),[l,M]=r.useState(a.building_id||""),[he,ue]=r.useState(a.unit_id||""),[f,w]=r.useState(a.unit_number||""),[u,U]=r.useState(a.property_id||""),[W,c]=r.useState([]),[Z,B]=r.useState([]),[b,$]=r.useState(a.sort_field||"created_at"),[N,G]=r.useState(a.sort_direction||"desc"),[o,J]=r.useState(!1),[O,k]=r.useState(!1),[g,q]=r.useState(null),[P,y]=r.useState(!1),[K,D]=r.useState(!1),{delete:Q,processing:z}=ae();r.useEffect(()=>{J(!0)},[]),r.useEffect(()=>{D(!0),A.get(route("admin.properties.get")).then(t=>{Array.isArray(t.data)?B(t.data):(console.warn("Unexpected response format for properties:",t.data),B([])),D(!1)}).catch(t=>{console.error("Error fetching properties:",t),D(!1),B([]),t.response&&t.response.status!==422&&L.error("Failed to load properties. Please try again later.")})},[]),r.useEffect(()=>{u&&(M(""),w(""))},[u]),r.useEffect(()=>{l?(y(!0),w(""),isNaN(parseInt(l))?A.post(route("maintenance.units-by-name"),{building_name:l}).then(t=>{Array.isArray(t.data)?c(t.data):(console.warn("Unexpected response format for units by name:",t.data),c([])),y(!1)}).catch(t=>{console.error("Error fetching units by name:",t),y(!1),c([])}):A.post(route("maintenance.units"),{building_id:l}).then(t=>{Array.isArray(t.data)?c(t.data):(console.warn("Unexpected response format for units:",t.data),c([])),y(!1)}).catch(t=>{console.error("Error fetching units:",t),y(!1),c([]),t.response&&t.response.status!==422&&L.error("Failed to load units. Please try again later.")})):(c([]),w(""))},[l]);const _=t=>{const p=t===b&&N==="asc"?"desc":"asc";$(t),G(p),I(t,p)},I=(t=b,p=N)=>{const s={};m&&(s.search=m),x&&(s.start_date=x),h&&(s.end_date=h),l&&(s.building_id=l),u&&(s.property_id=u),f&&(s.unit_number=f),t&&(s.sort_field=t),p&&(s.sort_direction=p),a.status&&(s.status=a.status),a.page&&(s.page=a.page),console.log("Applying filters with params:",s),H.get(route("admin.maintenance-requests"),s)},X=t=>{t.preventDefault(),I()},ee=()=>{S(""),F(""),R(""),M(""),U(""),w(""),c([]),H.get(route("admin.maintenance-requests"),{sort_field:b,sort_direction:N})},C=t=>b!==t?null:N==="asc"?e.jsx("svg",{className:"ml-1 h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.293 7.707a1 1 0 010-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 01-1.414 1.414L10 4.414 6.707 7.707a1 1 0 01-1.414 0z",clipRule:"evenodd"})}):e.jsx("svg",{className:"ml-1 h-4 w-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M14.707 12.293a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 111.414-1.414L10 15.586l3.293-3.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),V=m||x||h||l||u||a.status,te=t=>{q(t),k(!0)},se=()=>{Q(route("admin.maintenance-requests.destroy",g.id),{onSuccess:()=>{L.success("Maintenance request deleted successfully"),k(!1)},onError:t=>{L.error(t.message||"Failed to delete maintenance request")}})},re=n.user&&n.user.role==="super_admin";return e.jsxs(ie,{header:"Maintenance Requests",children:[e.jsx(ne,{title:"Maintenance Requests"}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"mb-8 rounded-lg bg-gradient-to-r from-primary-700 to-primary-600 p-6 shadow-lg transition-all duration-500",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)"},children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium text-white",children:"Maintenance Requests"}),e.jsx("p",{className:"mt-1 text-sm text-primary-100",children:"Manage and track all maintenance requests from tenants"})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsxs(E,{href:route("maintenance.create"),className:"inline-flex items-center rounded-md bg-white px-4 py-2 text-sm font-medium text-primary-700 shadow-sm hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-primary-600 transition-colors duration-150",children:[e.jsx("svg",{className:"-ml-1 mr-2 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Request"]})})]})}),e.jsxs("div",{className:"mb-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4 transition-all duration-500",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)",transitionDelay:"50ms"},children:[e.jsx("div",{className:"rounded-lg bg-white p-5 shadow-sm hover:shadow transition-shadow duration-300 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-gradient-to-r from-primary-600 to-primary-700 text-white shadow-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"truncate text-sm font-medium text-gray-500",children:"All Requests"}),e.jsx("dd",{className:"text-2xl font-medium text-gray-900",children:v.total})]})})]})}),e.jsx("div",{className:"rounded-lg bg-white p-5 shadow-sm hover:shadow transition-shadow duration-300 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-gradient-to-r from-accent-500 to-accent-600 text-white shadow-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Pending"}),e.jsx("dd",{className:"text-2xl font-medium text-gray-900",children:v.pending})]})})]})}),e.jsx("div",{className:"rounded-lg bg-white p-5 shadow-sm hover:shadow transition-shadow duration-300 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-gradient-to-r from-green-500 to-green-600 text-white shadow-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Approved"}),e.jsx("dd",{className:"text-2xl font-medium text-gray-900",children:v.approved})]})})]})}),e.jsx("div",{className:"rounded-lg bg-white p-5 shadow-sm hover:shadow transition-shadow duration-300 border border-gray-100",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-md bg-gradient-to-r from-red-500 to-red-600 text-white shadow-sm",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})})}),e.jsx("div",{className:"ml-5 w-0 flex-1",children:e.jsxs("dl",{children:[e.jsx("dt",{className:"truncate text-sm font-medium text-gray-500",children:"Rejected"}),e.jsx("dd",{className:"text-2xl font-medium text-gray-900",children:v.rejected})]})})]})})]}),e.jsx("div",{className:"mb-6 bg-white p-4 rounded-lg shadow-sm border border-gray-100 transition-all duration-500",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)",transitionDelay:"100ms"},children:e.jsxs("form",{onSubmit:X,children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),e.jsxs("div",{className:"relative rounded-md shadow-sm",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("input",{type:"text",id:"search",name:"search",value:m,onChange:t=>S(t.target.value),placeholder:"Search by tenant, building, or unit",className:"block w-full rounded-md border-gray-300 pl-10 pr-10 focus:border-primary-500 focus:ring-primary-500 sm:text-sm"}),m&&e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-3",children:e.jsx("button",{type:"button",onClick:()=>S(""),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{htmlFor:"property",className:"block text-sm font-medium text-gray-700 mb-1",children:"Property"}),e.jsxs("select",{id:"property",name:"property",value:u,onChange:t=>U(t.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-primary-500 focus:ring-primary-500 sm:text-sm",disabled:K,children:[e.jsx("option",{value:"",children:"All Properties"}),Z.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{htmlFor:"building_id",className:"block text-sm font-medium text-gray-700 mb-1",children:"Building"}),e.jsxs("select",{id:"building_id",name:"building_id",value:l,onChange:t=>M(t.target.value),className:"block w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 sm:text-sm",children:[e.jsx("option",{value:"",children:"All Buildings"}),j&&j.map(t=>e.jsxs("option",{value:t.id,children:[t.name,t.from_requests?" (From Requests)":""]},t.id))]})]}),e.jsxs("div",{className:"w-full md:w-1/3",children:[e.jsx("label",{htmlFor:"unit_number",className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit"}),e.jsxs("select",{id:"unit_number",name:"unit_number",value:f,onChange:t=>w(t.target.value),className:"block w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 sm:text-sm",disabled:P||!l,children:[e.jsx("option",{value:"",children:"Select Unit"}),P?e.jsx("option",{value:"",disabled:!0,children:"Loading units..."}):W&&W.map(t=>e.jsx("option",{value:t.unit_number,children:t.unit_number},t.id))]}),!l&&e.jsx("p",{className:"mt-1 text-xs text-gray-500"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full md:w-2/3",children:[e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("label",{htmlFor:"start_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),e.jsx("input",{type:"date",id:"start_date",name:"start_date",value:x,onChange:t=>F(t.target.value),className:"block w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),e.jsxs("div",{className:"w-full sm:w-1/2",children:[e.jsx("label",{htmlFor:"end_date",className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),e.jsx("input",{type:"date",id:"end_date",name:"end_date",value:h,onChange:t=>R(t.target.value),className:"block w-full rounded-md border-gray-300 focus:border-primary-500 focus:ring-primary-500 sm:text-sm"})]}),e.jsxs("div",{className:"w-full sm:w-1/3 flex items-end space-x-2",children:[e.jsxs("button",{type:"submit",className:"flex-1 inline-flex justify-center items-center rounded-md border border-transparent bg-primary-600 px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),"Apply"]}),V&&e.jsx("button",{type:"button",onClick:ee,className:"inline-flex justify-center items-center rounded-md border border-gray-300 bg-white px-3 py-2 text-sm font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[e.jsx(me,{currentStatus:a.status}),V&&e.jsxs("div",{className:"ml-auto text-sm text-gray-500",children:[e.jsx("span",{children:"Active filters: "}),a.status&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1",children:["Status: ",a.status]}),l&&j&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1",children:["Building: ",((Y=j.find(t=>t.id.toString()===l.toString()))==null?void 0:Y.name)||l]}),f&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1",children:["Unit: ",f]}),x&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1",children:["From: ",x]}),h&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800 mr-1",children:["To: ",h]}),m&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:['Search: "',m,'"']})]})]})]})}),e.jsx("div",{className:"overflow-hidden rounded-lg bg-white shadow-sm border border-gray-100 transition-all duration-500",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)",transitionDelay:"200ms"},children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500 cursor-pointer hover:bg-gray-100",onClick:()=>_("tenant_name"),children:e.jsxs("div",{className:"flex items-center",children:["Tenant",C("tenant_name")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500 cursor-pointer hover:bg-gray-100",onClick:()=>_("building_name"),children:e.jsxs("div",{className:"flex items-center",children:["Building / Unit",C("building_name")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Image"}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500 cursor-pointer hover:bg-gray-100",onClick:()=>_("created_at"),children:e.jsxs("div",{className:"flex items-center",children:["Date",C("created_at")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500 cursor-pointer hover:bg-gray-100",onClick:()=>_("status"),children:e.jsxs("div",{className:"flex items-center",children:["Status",C("status")]})}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Email Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3.5 text-left text-xs font-medium uppercase tracking-wider text-gray-500",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:i.data.length>0?i.data.map((t,p)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors duration-150",children:[e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:[e.jsx("div",{className:"font-medium text-gray-900",children:t.tenant_name}),e.jsx("div",{className:"text-xs text-gray-400",children:t.tenant_email})]}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:[e.jsx("div",{children:t.building_name}),e.jsxs("div",{className:"text-xs text-gray-400",children:["Unit: ",t.unit_number]})]}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:t.property_images?(()=>{try{if(Array.isArray(t.property_images)){if(t.property_images.length>0)return e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-gray-100",children:e.jsx("img",{src:`/storage/${t.property_images[0].replace(/^\/storage\//,"")}`,alt:"Property image",className:"h-full w-full object-cover object-center",onError:s=>{s.target.onerror=null,console.error("Failed to load image:",t.property_images[0]),s.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f3f4f6'/%3E%3Cpath d='M30,40 L70,40 L70,70 L30,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3Cpath d='M40,50 C42.5,50 44.5,47.5 44.5,45 C44.5,42.5 42.5,40 40,40 C37.5,40 35,42.5 35,45 C35,47.5 37.5,50 40,50 Z' fill='%23d1d5db'/%3E%3Cpath d='M30,70 L50,50 L60,60 L70,50 L70,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3C/svg%3E"}})})}else if(typeof t.property_images=="string"&&t.property_images.length>0){const s=JSON.parse(t.property_images);if(Array.isArray(s)&&s.length>0)return e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-gray-100",children:e.jsx("img",{src:`/storage/${s[0].replace(/^\/storage\//,"")}`,alt:"Property image",className:"h-full w-full object-cover object-center",onError:T=>{T.target.onerror=null,console.error("Failed to load image:",s[0]),T.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' fill='%23f3f4f6'/%3E%3Cpath d='M30,40 L70,40 L70,70 L30,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3Cpath d='M40,50 C42.5,50 44.5,47.5 44.5,45 C44.5,42.5 42.5,40 40,40 C37.5,40 35,42.5 35,45 C35,47.5 37.5,50 40,50 Z' fill='%23d1d5db'/%3E%3Cpath d='M30,70 L50,50 L60,60 L70,50 L70,70 Z' fill='none' stroke='%23d1d5db' stroke-width='2'/%3E%3C/svg%3E"}})})}return e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}catch(s){return console.error("Error parsing property_images:",s),e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})}})():e.jsx("div",{className:"w-12 h-12 rounded-md overflow-hidden bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm text-gray-500",children:new Date(t.created_at).toLocaleDateString()}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:e.jsx(xe,{status:t.status})}),e.jsxs("td",{className:"whitespace-nowrap px-6 py-4 text-sm",children:[t.email_delivery_status==="sent"&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-green-100 px-2.5 py-0.5 text-xs font-medium text-green-800",children:[e.jsx("svg",{className:"-ml-0.5 mr-1.5 h-2 w-2 text-green-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Sent"]}),t.email_delivery_status==="failed"&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-red-100 px-2.5 py-0.5 text-xs font-medium text-red-800",children:[e.jsx("svg",{className:"-ml-0.5 mr-1.5 h-2 w-2 text-red-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Failed"]}),!t.email_delivery_status&&e.jsxs("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-2.5 py-0.5 text-xs font-medium text-gray-800",children:[e.jsx("svg",{className:"-ml-0.5 mr-1.5 h-2 w-2 text-gray-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Unknown"]})]}),e.jsx("td",{className:"whitespace-nowrap px-6 py-4 text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(E,{href:route("admin.maintenance-requests.show",t.id),className:"text-primary-600 hover:text-primary-900 flex items-center bg-primary-50 px-2.5 py-1.5 rounded-md hover:bg-primary-100 transition-colors duration-150",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"View"]}),re&&e.jsxs("button",{onClick:()=>te(t),className:"text-red-600 hover:text-red-900 flex items-center bg-red-50 px-2.5 py-1.5 rounded-md hover:bg-red-100 transition-colors duration-150",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Delete"]}),t.status==="pending"&&e.jsx(e.Fragment,{})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-10 text-center text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-gray-300 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"font-medium",children:"No maintenance requests found"}),e.jsx("p",{className:"text-gray-400 mt-1",children:"Try adjusting your search or filter criteria"})]})})})})]})})}),e.jsx("div",{className:"mt-6 transition-all duration-500",style:{opacity:o?1:0,transform:o?"translateY(0)":"translateY(20px)",transitionDelay:"300ms"},children:e.jsx(le,{links:i.links})})]})}),e.jsx(oe,{show:O,onClose:()=>k(!1),children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Delete Maintenance Request"}),e.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Are you sure you want to delete this maintenance request? This action cannot be undone."}),g&&e.jsxs("div",{className:"mt-4 rounded-md bg-gray-50 p-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Request Details:"}),e.jsxs("ul",{className:"mt-2 text-sm text-gray-600",children:[e.jsxs("li",{children:["Tenant: ",g.tenant_name]}),e.jsxs("li",{children:["Building: ",g.building_name]}),e.jsxs("li",{children:["Unit: ",g.unit_number]}),e.jsxs("li",{children:["Date: ",new Date(g.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end",children:[e.jsx(de,{onClick:()=>k(!1),className:"mr-3",children:"Cancel"}),e.jsx(ce,{onClick:se,disabled:z,children:z?"Deleting...":"Delete Request"})]})]})})]})}function me({currentStatus:i}){const d=[{value:"",label:"All"},{value:"pending",label:"Pending"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"}];return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Status:"}),e.jsx("div",{className:"flex items-center flex-wrap gap-2",children:d.map(n=>e.jsx(E,{href:route("admin.maintenance-requests",{...n.value?{status:n.value}:{},...i&&i!==n.value?{page:1}:{}}),className:`inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium ${i===n.value?"bg-primary-100 text-primary-800 border border-primary-200":"bg-gray-100 text-gray-800 border border-gray-200 hover:bg-gray-200"} transition-colors duration-150`,children:n.label},n.value))})]})}function xe({status:i}){let d="",n="";switch(i){case"pending":d="bg-accent-100",n="text-accent-800";break;case"approved":d="bg-green-100",n="text-green-800";break;case"rejected":d="bg-red-100",n="text-red-800";break;default:d="bg-gray-100",n="text-gray-800"}return e.jsxs("span",{className:`inline-flex items-center rounded-full px-3 py-0.5 text-sm font-medium ${d} ${n}`,children:[i==="pending"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-accent-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),i==="approved"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-green-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),i==="rejected"&&e.jsx("svg",{className:"-ml-1 mr-1.5 h-2 w-2 text-red-500",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),i.charAt(0).toUpperCase()+i.slice(1)]})}export{be as default};
